/* =============================================
   Main Stylesheet - Import Aggregator
   Главный файл стилей - Агрегатор импортов
   ============================================= */

/* EN: This file imports all modular CSS components
   RU: Этот файл импортирует все модульные CSS компоненты */

/* Base Styles | Базовые стили */
@import 'styles/base/variables.css';
@import 'styles/base/themes.css';
@import 'styles/base/reset.css';
@import 'styles/base/layout.css';

/* UI Components | UI компоненты */
@import 'styles/components/preloader.css';
@import 'styles/components/header.css';
@import 'styles/components/hero.css';
@import 'styles/components/buttons.css';
@import 'styles/components/forms.css';
@import 'styles/components/faq.css';
@import 'styles/components/sections.css';
@import 'styles/components/reviews.css';
@import 'styles/components/blog-card.css';
@import 'styles/components/blog-feed.css';
@import 'styles/components/blog-post.css';
@import 'styles/components/rich-text.css';
@import 'styles/components/reading-mode.css';
@import 'styles/components/modal.css';
@import 'styles/components/gallery.css';
@import 'styles/components/footer.css';
@import 'styles/components/enhanced-animations.css';
@import 'styles/components/interactive.css';

/* Utilities | Утилиты */
@import 'styles/components/utilities.css';

/* EN: Additional global styles not yet modularized
   RU: Дополнительные глобальные стили, ещё не модуляризованные */

/* Sakura Canvas | Канвас сакуры */
#sakura-canvas {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  mix-blend-mode: screen;
  opacity: 0.55;
}

/* Spotlight cursor layer | Слой прожектора курсора */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(
    circle at var(--spot-x, 50%) var(--spot-y, 50%),
    rgba(var(--primary-rgb) / 0.18),
    transparent 55%
  );
  mix-blend-mode: overlay;
  opacity: 0;
  transition: opacity 0.8s ease;
  z-index: 2;
}

body.has-spotlight::after {
  opacity: 0.75;
}

/* Theme transition overlay | Оверлей перехода темы */
html.theme-transitioning::before {
  content: '';
  position: fixed;
  inset: 0;
  background:
    radial-gradient(circle at 30% 30%, rgba(var(--primary-rgb) / 0.25), transparent 70%),
    radial-gradient(circle at 70% 60%, rgba(var(--accent-rgb) / 0.25), transparent 70%);
  -webkit-backdrop-filter: blur(24px) brightness(1.05);
  backdrop-filter: blur(24px) brightness(1.05);
  pointer-events: none;
  opacity: 0;
  animation: themeFade var(--dur-md) ease forwards;
  z-index: 300;
}

@keyframes themeFade {
  0% {
    opacity: 0;
  }
  20% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

/* Enhanced hover effects | Улучшенные эффекты наведения */
.post-card {
  --hover-scale: 1.025;
  transition:
    transform 0.9s var(--ease-spring),
    box-shadow 0.6s,
    border-color 0.6s;
}

.post-card:hover {
  transform: translateY(-10px) scale(var(--hover-scale));
  box-shadow:
    0 18px 46px -12px rgba(0 0 0 / 0.65),
    0 6px 22px -6px rgba(0 0 0 / 0.45);
}

.post-card:hover::before {
  opacity: 0.75;
  filter: brightness(1.15) saturate(1.1);
}

.post-card:focus-within {
  outline: none;
  box-shadow:
    0 0 0 2px rgba(var(--primary-rgb) / 0.7),
    0 0 0 6px rgba(var(--primary-rgb) / 0.25);
}

/* LQIP shimmer overlay | Оверлей мерцания LQIP */
.post-card-media {
  position: relative;
}

.post-card-media::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    110deg,
    rgba(255 255 255 / 0) 0%,
    rgba(255 255 255 / 0.15) 45%,
    rgba(255 255 255 / 0) 70%
  );
  background-size: 200% 100%;
  animation: shimmer 2s linear infinite;
  opacity: 0;
  transition: opacity 0.6s ease;
}

.post-card-media[data-state='loading']::after {
  opacity: 0.55;
}

.post-card-media[data-state='loaded']::after {
  opacity: 0;
  animation: none;
}

@keyframes shimmer {
  to {
    background-position: -200% 0;
  }
}

/* Parallax tilt effect | Эффект параллакса с наклоном */
.fx-tilt {
  perspective: 900px;
  transform-style: preserve-3d;
}

.fx-tilt:hover {
  transform: translateY(-4px) rotateX(6deg) rotateY(-6deg);
}

/* Responsive adjustments | Адаптивные настройки */
@media (max-width: 860px) {
  /* Mobile navigation | Мобильная навигация */
  .main-nav ul {
    position: fixed;
    top: 70px;
    right: 0;
    width: min(310px, 100%);
    background: rgba(15 17 21 / 0.92);
    -webkit-backdrop-filter: blur(14px);
    backdrop-filter: blur(14px);
    height: calc(100dvh - 70px);
    flex-direction: column;
    padding: 2rem 1.5rem;
    transform: translateX(100%);
    transition: transform 0.6s cubic-bezier(0.16, 0.84, 0.44, 1);
    box-shadow: -2px 0 10px -2px rgba(0 0 0 / 0.4);
  }

  .main-nav ul[data-open='true'] {
    transform: translateX(0);
  }

  .nav-toggle {
    display: inline-flex;
  }

  body.nav-open {
    overflow: hidden;
  }

  /* Hero grid | Сетка героя */
  .hero-inner {
    grid-template-columns: 1fr;
  }

  .photo-stack {
    width: clamp(240px, 70vw, 360px);
  }

  /* Form layout | Раскладка формы */
  .form-row.split {
    flex-direction: column;
  }
}

/* Reduced motion preference | Предпочтение уменьшенного движения */
@media (prefers-reduced-motion: reduce) {
  body.has-spotlight::after {
    display: none;
  }
}
