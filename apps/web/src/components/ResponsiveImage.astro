---
/**
 * ResponsiveImage Component
 *
 * Astro wrapper for optimized images with multiple formats and sizes
 * Replaces custom build.mjs image processing
 */
import { Picture } from 'astro:assets';

interface Props {
  src: ImageMetadata;
  alt: string;
  width?: number;
  height?: number;
  loading?: 'lazy' | 'eager';
  class?: string;
  sizes?: string;
  widths?: number[];
  formats?: ('avif' | 'webp' | 'jpeg')[];
}

const {
  src,
  alt,
  width,
  height,
  loading = 'lazy',
  class: className,
  sizes = '(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 800px',
  widths = [320, 480, 640, 800, 1024],
  formats = ['avif', 'webp', 'jpeg']
} = Astro.props;
---

<Picture
  src={src}
  alt={alt}
  width={width}
  height={height}
  loading={loading}
  class={className}
  widths={widths}
  formats={formats}
  sizes={sizes}
  quality={80}
/>
